### トピック03

## 課題：ルーレットのシミュレーション

### 概要

![wheel](./img/wheel.png)

上の図のように，クイズ番組などで，商品名の書いてあるルーレットを回して，矢が指したところの賞品を贈呈するゲームはよく見かけられる．矢が指す領域は一般には賞品によって大きく異なり，出やすい賞品や出ずらい商品があるように設定されている．このような選択をコンピュータでシミュレーションするプログラムをこの回では作成する．今回用いるのは「ルーレットホイールセレクション」と呼ばれるアルゴリズムで，機械学習などの分野でもよくつかわれている．

上の例では，0が57%, 1が22%，2が14%, 3が7%の確率で出るようにしたい．

### アルゴリズムの説明
下の図に示すように，まず矢に相当する場所を乱数を使って決める．その場所が何番目の配列に相当するかを0から順番に見てゆけばよい．
![wheel2](/img/wheel2.png)
これを言葉で記述すると以下のようになる．
```
整数配列sに，ルーレットの幅が与えられているものとする．（たとえばs[0] = 10, s[1] = 5など．）

１．sの要素の合計値を計算する（以下「合計」と呼ぶ）
２．0より大きく「合計」より小さい実数の乱数を1つ生成する（以下「矢の位置」と呼ぶ）
３．作業用の整数変数xを用意し，sの0番目の要素の値を代入しておく（これにはsを累積した値を格納する．以下「累積値」と呼ぶ）
４．当たりの番号を示す整数変数（以下「番号」と呼ぶ）を用意し，最初は0に初期化する．
５．「累積値」が「矢の位置」 より小さければ，「番号」を1だけ増やし，「累積値」に，sの次の値を加算する．そうでなければ，「番号」を当たりの番号として返し，終了．
```
```
※重要※　このプログラムでは，0から1まで（1は含まない）の乱数値を生成する方法として，rnd.nextDouble()を用いること．
```
フローチャートに従って，上のアルゴリズムをプログラム化してください．具体的には，以前の課題と同様に，wheelという名前（先頭小文字）のパッケージを作成し，Wheelというクラス（先頭大文字）を作成し，下記の未完成のプログラムを元にして，作成したプログラムをアップロード提出して下さい．このプログラムでは，{2, 5, 3, 7, 10}の割合について，30回ルーレットを回した結果を印刷し，つづいて{10, 5}の割合について，30回ルーレットを回した結果を印刷しています．最初の例では4が選ばれる割合が多いこと，また2番目の例では0が選ばれる割合が多いことを確認してください．

```java
package wheel;
/**
 *
 * @author 学生番号 氏名
 *
 */
import java.util.*;

public class Wheel {
    static Random  rnd = new Random();

    public static int spin(int[] s) {
        // ここにプログラムを作成

    }
    public static void main(String[] args) {
        // TEST1
        int[] p1 = {2, 5, 3, 7, 10};
        for(int i = 0; i < 30; ++i) {
            System.out.print(spin(p1)+" ");
        }

        System.out.println();

        // TEST2
        int[] p2 = {10, 5};
        for(int i = 0; i < 30; ++i) {
            System.out.print(spin(p2)+" ");
        }
    }

}
```
